<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Medis - Murni Teguh Memorial Hospital</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="mode-psi">
    <div class="container">
        <div class="header-container">
            <img src="https://github.com/didasar91/PSI-Score-Calculator/blob/main/header.jpg?raw=true" alt="Murni Teguh" class="header-image">
        </div>

        <div class="screen-only menu-container">
            <button onclick="showCalculator('psi')" id="btn-psi" class="btn-tab active">PSI Score</button>
            <button onclick="showCalculator('natrium')" id="btn-natrium" class="btn-tab">Koreksi Natrium</button>
        </div>

        <div class="patient-total-wrapper">
            <div class="patient-info">
                <div class="info-line"><span class="label">Nama</span><span>:</span><span id="displayNama">-</span></div>
                <div class="info-line"><span class="label">No. MR</span><span>:</span><span id="displayNoMR">-</span></div>
                <div class="info-line"><span class="label">Tgl Lahir</span><span>:</span><span id="displayTglLahir">-</span></div>
                <div class="info-line"><span class="label">Umur</span><span>:</span><span id="displayUmur">-</span></div>
                <div class="info-line"><span class="label">Tgl Assessment</span><span>:</span><span id="displayTglAsesmen">-</span></div>
            </div>

            <div id="psi-output-box" class="total-section psi-box">
                <div class="total-line"><span class="total-label">PSI Score:</span><span id="totalScore">0</span></div>
                <div class="total-line"><span class="total-label">Kelas Risiko:</span><span id="kelasRisiko">-</span></div>
                <div class="total-line"><span class="total-label">Mortality:</span><span id="mortalityRate">-</span></div>
            </div>
            
            <div id="natrium-output-box" class="total-section natrium-box" style="display:none;">
                <div class="total-line"><span class="total-label">Total Δ Na+:</span><span id="displayDeltaTotal">0</span> mEq/L</div>
                <div class="total-line"><span class="total-label">Status:</span><span id="displayStatus">Aman</span></div>
            </div>
        </div>

        <div class="input-form screen-only">
            <div class="form-group"><label>Nama Pasien*:</label><input type="text" id="nama"></div>
            <div class="form-group"><label>No. MR (10 Digit)*:</label><input type="text" id="noMR" maxlength="10"></div>
            <div class="form-group"><label>Tanggal Lahir*:</label><input type="date" id="tglLahir"></div>
            <div class="form-group"><label>Jenis Kelamin*:</label><select id="jk"><option value="">Pilih</option><option value="L">Laki-laki</option><option value="P">Perempuan</option></select></div>
            <div class="form-group"><label>Tgl Assessment*:</label><input type="date" id="tglAsesmen"></div>
            <div class="form-group"><label>Berat Badan (kg)*:</label><input type="number" id="bb"></div>
        </div>

        <div id="calc-psi-content">
            <h2 class="form-title">Pneumonia Severity Index Checklist</h2>
            <div class="psi-tables">
                <table class="scoring-table">
                    <thead><tr><th>Kriteria Penilaian</th><th class="score-col">Skor</th></tr></thead>
                    <tbody>
                        <tr class="section-head"><td colspan="2">Faktor Demografik</td></tr>
                        <tr><td>Usia</td><td class="score-col" id="scoreUsia">0</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="10" data-id="panti"> Penghuni Panti Werda (+10)</label></td><td class="score-col" id="scorePanti">0</td></tr>
                        <tr class="section-head"><td colspan="2">Penyakit Komorbid</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="30" data-id="keganasan"> Keganasan (+30)</label></td><td class="score-col" id="scoreKeganasan">0</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="20" data-id="hati"> Penyakit Hati (+20)</label></td><td class="score-col" id="scoreHati">0</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="10" data-id="jantung"> Gagal Jantung Kongestif (+10)</label></td><td class="score-col" id="scoreJantung">0</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="10" data-id="serebro"> Penyakit Serebrovaskular (+10)</label></td><td class="score-col" id="scoreSerebro">0</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="10" data-id="ginjal"> Penyakit Ginjal (+10)</label></td><td class="score-col" id="scoreGinjal">0</td></tr>
                        <tr class="section-head"><td colspan="2">Pemeriksaan Fisis</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="20" data-id="kesadaran"> Gangguan Kesadaran (+20)</label></td><td class="score-col" id="scoreKesadaran">0</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="20" data-id="nafas"> Frekuensi Nafas > 30x/menit (+20)</label></td><td class="score-col" id="scoreNafas">0</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="20" data-id="sistolik"> Tekanan Darah Sistolik < 90 mmHg (+20)</label></td><td class="score-col" id="scoreSistolik">0</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="15" data-id="suhu"> Suhu < 35°C atau > 40°C (+15)</label></td><td class="score-col" id="scoreSuhu">0</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="10" data-id="nadi"> Frekuensi Nadi > 125x/menit (+10)</label></td><td class="score-col" id="scoreNadi">0</td></tr>
                        <tr class="section-head"><td colspan="2">Hasil Laboratorium</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="30" data-id="ph"> pH Arteri < 7.35 (+30)</label></td><td class="score-col" id="scorePh">0</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="20" data-id="ureum"> Ureum > 64.2 mg/dL (+20)</label></td><td class="score-col" id="scoreUreum">0</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="20" data-id="natriumCheck"> Natrium < 130 mEq/L (+20)</label></td><td class="score-col" id="scoreNatriumCheck">0</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="10" data-id="glukosa"> Glukosa > 250 mg/dL (+10)</label></td><td class="score-col" id="scoreGlukosa">0</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="10" data-id="hematokrit"> Hematokrit < 30% (+10)</label></td><td class="score-col" id="scoreHematokrit">0</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="10" data-id="pao2"> PaO2 < 60 mmHg (+10)</label></td><td class="score-col" id="scorePao2">0</td></tr>
                        <tr><td><label class="checkbox-label"><input type="checkbox" class="psi-check" data-score="10" data-id="efusi"> Efusi Pleura (+10)</label></td><td class="score-col" id="scoreEfusi">0</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="calc-natrium-content" style="display:none;">
            <h2 class="form-title">Koreksi Hiponatremia (Adrogué-Madias)</h2>
            <div class="input-form screen-only">
                <div class="form-group"><label>Na+ Serum Saat Ini:</label><input type="number" id="naSerum" placeholder="Contoh: 120"></div>
                <div class="form-group"><label>Na+ Serum Target:</label><input type="number" id="naTarget" placeholder="Contoh: 135"></div>
                <div class="form-group"><label>Jenis Cairan Infus:</label>
                    <select id="naInfus">
                        <option value="513">NaCl 3% (513 mEq/L)</option>
                        <option value="154">NaCl 0.9% (154 mEq/L)</option>
                    </select>
                </div>
            </div>
            
            <div id="warning-ods" class="warning-box" style="display:none;">
                ⚠️ Target koreksi > 10 mEq/L. Perhitungan dibagi menjadi rencana 2 hari untuk mencegah ODS.
            </div>

            <div class="natrium-result-table">
                <table class="scoring-table">
                    <thead><tr><th id="header-hari-1">Rencana Koreksi 24 Jam Pertama</th><th>Hasil</th></tr></thead>
                    <tbody>
                        <tr><td>TBW Pasien</td><td><span id="txtTBW">-</span></td></tr>
                        <tr><td>Target Δ Na+ Periode Ini</td><td><span id="txtTargetHarian">-</span></td></tr>
                        <tr class="highlight-natrium"><td>Kebutuhan Botol (500 mL)</td><td><span id="txtBotolDisplay">0 Botol</span></td></tr>
                        <tr class="highlight-natrium"><td>Kecepatan Infus</td><td><span id="txtKecepatan">-</td></tr>
                    </tbody>
                </table>

                <table class="scoring-table" id="table-hari-2" style="display:none; margin-top: 15px;">
                    <thead><tr><th style="background:#2196F3 !important;">Rencana Koreksi Hari ke-2</th><th>Hasil</th></tr></thead>
                    <tbody>
                        <tr><td>Target Sisa Δ Na+</td><td><span id="txtTargetHarian2">-</span></td></tr>
                        <tr class="highlight-natrium"><td>Kebutuhan Botol (500 mL)</td><td><span id="txtBotolDisplay2">0 Botol</span></td></tr>
                        <tr class="highlight-natrium"><td>Kecepatan Infus</td><td><span id="txtKecepatan2">-</td></tr>
                    </tbody>
                </table>

                  <table class="scoring-table" id="table-hari-3" style="display:none; margin-top: 15px;">
                    <thead><tr><th style="background:#f44336 !important;">Rencana Koreksi Hari ke-3</th><th>Hasil</th></tr></thead>
                    <tbody>
                        <tr><td>Target Sisa Δ Na+</td><td id="txtTargetHarian3">-</td></tr>
                        <tr class="highlight-natrium"><td>Kebutuhan Botol (500 mL)</td><td id="txtBotolDisplay3">-</td></tr>
                        <tr class="highlight-natrium"><td>Kecepatan Infus</td><td id="txtKecepatan3">-</td></tr>
                    </tbody>
                </table>

                <table class="scoring-table" id="table-hari-4" style="display:none; margin-top: 15px;">
                    <thead><tr><th style="background:#9C27B0 !important;">Rencana Koreksi Hari ke-4</th><th>Hasil</th></tr></thead>
                    <tbody>
                        <tr><td>Target Sisa Δ Na+</td><td id="txtTargetHarian4">-</td></tr>
                        <tr class="highlight-natrium"><td>Kebutuhan Botol (500 mL)</td><td id="txtBotolDisplay4">-</td></tr>
                        <tr class="highlight-natrium"><td>Kecepatan Infus</td><td id="txtKecepatan4">-</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
        

        <div class="dpjp-section">
            <p>Diketahui oleh,</p>
            <input type="text" id="inputDPJP" placeholder="Nama Dokter*" class="screen-only dpjp-input">
            <div id="displayDPJP" class="dpjp-name"></div>
        </div>

        <div class="screen-only button-container">
            <button onclick="printAndDownload()" class="btn-action btn-print">Print / Save PDF</button>
            <button onclick="location.reload()" class="btn-action btn-clear">Clear / Reset All</button>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
